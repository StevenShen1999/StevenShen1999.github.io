import{a as T,V as M,b as f,e as w,f as U,c as E,d as F,g as _,j as H,h as P,i as v,k as j}from"./VSnackbar.bcd488e0.js";import{l as D,N as s,S as p,P as o,n as t,R as l,O as m,Q as g,ah as V,ai as c,aj as C,U as b,M as q}from"./index.5d3cb612.js";import{_ as $,B as A,V as h,D as y,w as S}from"./VAvatar.622be82b.js";import{b as O,V as R,a as W}from"./VDivider.d742a7d3.js";const x=D({props:["topic"],data(){return{topicContent:null,userId:1,submitted:!1}},methods:{closeDialog(e){this.$emit("close-dialog",e)},submitTopic(){this.submitted=!0,T.delete(`${this.$hostname}/api/topics/${this.topic.ID}`).then(e=>{this.closeDialog(e.data)}).catch(e=>{console.log(e),this.closeDialog({status:`Failed, ${e}`})})}},created(){this.topicContent=this.topic.Content}}),Q=C("b",null,"This will mark the following topic as Discussed and will no longer be fetchable on the homepage!",-1),z={class:"text-center"};function G(e,a,r,u,d,k){return s(),p(U,null,{default:o(()=>[t(M,{class:"text-h5"},{default:o(()=>[l(" Confirm Deletion ")]),_:1}),e.submitted?c("",!0):(s(),m("form",{key:0,onSubmit:a[0]||(a[0]=g((...n)=>e.submitTopic&&e.submitTopic(...n),["prevent"]))},[t(f,null,{default:o(()=>[Q]),_:1}),t(f,null,{default:o(()=>[l(V(e.topicContent),1)]),_:1}),t(w,null,{default:o(()=>[t(A),t(h,{color:"red darken-1",text:"",onClick:g(e.closeDialog,["stop"])},{default:o(()=>[l(" Cancel ")]),_:1},8,["onClick"]),t(h,{color:"red darken-1",text:"",variant:"flat",type:"submit"},{default:o(()=>[l(" Delete ")]),_:1})]),_:1})],32)),e.submitted?(s(),p(f,{key:1},{default:o(()=>[C("div",z,[t(y,{color:"purple",indeterminate:"",center:""})])]),_:1})):c("",!0)]),_:1})}const J=$(x,[["render",G]]),K=D({props:["topic"],data(){return{topicContent:null,topicDescription:null,userId:1,submitted:!1}},methods:{closeDialog(e){this.$emit("close-dialog",e)},submitTopic(){this.submitted=!0,T.patch(`${this.$hostname}/api/topics`,{ID:this.topic.ID,content:this.topicContent,description:this.topicDescription}).then(e=>{this.closeDialog(e.data)}).catch(e=>{console.log(e),this.closeDialog({status:`Failed, ${e}`})})}},created(){this.topicContent=this.topic.Content,this.topicDescription=this.topic.Description}}),L={class:"text-center"};function X(e,a,r,u,d,k){return s(),p(U,null,{default:o(()=>[t(M,{class:"text-h5"},{default:o(()=>[l(" Modify Topic ")]),_:1}),e.submitted?c("",!0):(s(),m("form",{key:0,onSubmit:a[2]||(a[2]=g((...n)=>e.submitTopic&&e.submitTopic(...n),["prevent"]))},[t(f,null,{default:o(()=>[t(E,{modelValue:e.topicContent,"onUpdate:modelValue":a[0]||(a[0]=n=>e.topicContent=n),label:"Topic Content",required:""},null,8,["modelValue"]),t(F,{filled:"",name:"input-7-4",label:"Description (Optional)",modelValue:e.topicDescription,"onUpdate:modelValue":a[1]||(a[1]=n=>e.topicDescription=n)},null,8,["modelValue"])]),_:1}),t(w,null,{default:o(()=>[t(A),t(h,{color:"red darken-1",text:"",onClick:g(e.closeDialog,["stop"])},{default:o(()=>[l(" Cancel ")]),_:1},8,["onClick"]),t(h,{color:"green darken-1",text:"",variant:"flat",type:"submit"},{default:o(()=>[l(" Submit ")]),_:1})]),_:1})],32)),e.submitted?(s(),p(f,{key:1},{default:o(()=>[C("div",L,[t(y,{color:"purple",indeterminate:"",center:""})])]),_:1})):c("",!0)]),_:1})}const Y=$(K,[["render",X]]),Z=D({data(){return{snackbar:!1,errorMessage:null,modifyDialog:!1,deleteDialog:!1,targetTopic:null,dataSource:null,headers:[{text:"Topic",value:"Content"},{text:"Created",value:"CreatedAt",sortable:!0},{text:"Updated",value:"UpdatedAt",sortable:!0},{text:"Discussed",value:"DeletedAt",sortable:!0},{text:"Actions",value:"Actions"}]}},methods:{modifyTopic(e){this.targetTopic=e,this.modifyDialog=!0},deleteTopic(e){this.targetTopic=e,this.deleteDialog=!0},handleModification(e){if(this.targetTopic=null,this.modifyDialog=!1,this.deleteDialog=!1,this.errorMessage=null,e.status)this.errorMessage=e.status;else if(e.ID)console.log("Success!");else return;this.snackbar=!0,this.fetchTopics({deleted:!0})},fetchTopics(e){this.dataSource=null;let a=`${this.$hostname}/api/topics`,r="?";e.deleted&&(r+="all=true"),r!=="?"&&(a+=r),T.get(`${a}`).then(u=>{this.dataSource=u.data,this.dataSource.forEach(d=>{d.CreatedAt=d.CreatedAt,d.UpdatedAt=d.UpdatedAt})}).catch(u=>{console.log(u)})},save(e){console.log(e)}},mounted(){this.fetchTopics({deleted:!0})},components:{ConfirmDelete:J,ModifyTopic:Y}});const ee={key:0,class:"text-center"},te={style:{padding:"15px"}},oe={key:0};function ae(e,a,r,u,d,k){const n=b("ModifyTopic"),I=b("ConfirmDelete"),B=b("EasyDataTable");return s(),m(q,null,[t(R,{flat:""},{default:o(()=>[t(O,{style:{"text-align":"center"}},{default:o(()=>[l("History of Us")]),_:1})]),_:1}),t(W,{class:"mx-4",vertical:""}),e.dataSource?c("",!0):(s(),m("div",ee,[t(y,{indeterminate:"",color:"green"})])),t(_,{modelValue:e.modifyDialog,"onUpdate:modelValue":a[0]||(a[0]=i=>e.modifyDialog=i),"max-width":"500"},{default:o(()=>[t(n,{onCloseDialog:e.handleModification,topic:e.targetTopic},null,8,["onCloseDialog","topic"])]),_:1},8,["modelValue"]),t(_,{modelValue:e.deleteDialog,"onUpdate:modelValue":a[1]||(a[1]=i=>e.deleteDialog=i),"max-width":"500"},{default:o(()=>[t(I,{onCloseDialog:e.handleModification,topic:e.targetTopic},null,8,["onCloseDialog","topic"])]),_:1},8,["modelValue"]),t(H,{class:"fill-height"},{default:o(()=>[e.dataSource?(s(),p(B,{key:0,headers:e.headers,items:e.dataSource,"rows-per-page":10},{"item-actions":o(i=>[t(S,{icon:"mdi-pencil-off",class:"crud-icons",onClick:N=>e.modifyTopic(i)},null,8,["onClick"]),t(S,{icon:"mdi-delete",class:"crud-icons",onClick:N=>e.deleteTopic(i)},null,8,["onClick"])]),expand:o(i=>[C("div",te,[i.Description?(s(),m("b",oe,"Description:")):c("",!0),l(" "+V(i.Description),1)])]),_:1},8,["headers","items"])):c("",!0)]),_:1}),t(j,{modelValue:e.snackbar,"onUpdate:modelValue":a[3]||(a[3]=i=>e.snackbar=i)},{default:o(()=>[t(P,{class:"d-flex align-center justify-space-between"},{default:o(()=>[t(v,{cols:"auto"},{default:o(()=>[l(V(e.errorMessage?`Something Went Wrong: ${e.errorMessage}`:"Success"),1)]),_:1}),t(v,{cols:"auto"},{default:o(()=>[t(h,{color:"pink",text:"",onClick:a[2]||(a[2]=i=>e.snackbar=!1)},{default:o(()=>[l(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const ie=$(Z,[["render",ae]]),de=D({__name:"History",setup(e){return(a,r)=>(s(),p(ie))}});export{de as default};
